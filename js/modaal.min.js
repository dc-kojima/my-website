document.addEventListener("DOMContentLoaded", () => {
  const modalLinks = document.querySelectorAll(".inline");
  const modals = document.querySelectorAll(".modal");
  const ms = 400;

  if (!modalLinks.length || !modals.length) return;

  modals.forEach((modal) => {
    if (modal) {
      modal.style.transition = `opacity ${ms}ms`;
      modal.style.opacity = 0;
    }
  });

  modalLinks.forEach((link, index) => {
    link.addEventListener("click", (e) => {
      e.preventDefault();

      const targetModal = modals[index];
      if (!targetModal) return;

      const targetContent = targetModal.querySelector('[id^="inline"]');
      if (!targetContent) return;

      document.body.classList.add("modal-open");

      targetContent.style.display = "block";
      targetModal.classList.add("is_open");

      setTimeout(() => {
        targetModal.style.opacity = 1;
      }, 50);
    });
  });

  const modalCloseButtons = document.querySelectorAll(".modaal-close");
  modalCloseButtons.forEach((closeBtn) => {
    closeBtn.addEventListener("click", () => {
      const modal = closeBtn.closest(".modal");
      if (!modal) return;

      const modalContent = modal.querySelector('[id^="inline"]');
      if (!modalContent) return;

      document.body.classList.remove("modal-open");

      setTimeout(() => {
        modal.style.opacity = 0;
      }, 1);

      setTimeout(() => {
        modal.classList.remove("is_open");
        modalContent.style.display = "none";
      }, ms);
    });
  });
});
